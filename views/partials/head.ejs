<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clueless Closet | <%= title %></title>
<link rel="stylesheet" type="css" href="../../styles/main.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--Temporary-->
<!--TODO: Get links to static files working-->
<style>
    @import url('https://fonts.googleapis.com/css2?family=Nerko+One&family=Open+Sans+Condensed:wght@300&display=swap');
    body {
        background-color: #FFDAD6;
        font-family: 'Open Sans Condensed', sans-serif;
    }
    h1, h2, h3 {
        font-family: 'Nerko One', cursive;
    }
    header h1 {
        text-align: center;
    }
    #nav_div {
        display: flex;
    }
    #nav_div div {
        float: right;
    }
    nav ul {
        margin: 0;
        padding: 0;
    }
    nav li{
        list-style-type: none;
        margin: 5px;
    }
    a {
        display: block;
        text-decoration: none;
        padding: 15px;
    }
    a:hover {
        text-decoration: underline;
    }
    main {
        text-align: center;
    }
</style>

<script>
    // AJAX function sends request to clothing controller to generate an outfit
    // then adds the outfit to HTML.
    function generateOutfit(userId, warmRating) {
        console.log("Generating new outfit...");

        $.post("/generate", {userId:userId, warmRating:warmRating}, function(outfit) {
            console.log("back from server with:");
            console.log(outfit);
            // append to output div
            $("#outfit_output").empty();
            $("#outfit_output").append("<p>" + outfit.clothes[0].clothingtype + "</p>");
            $("#outfit_output").append("<p>" + outfit.clothes[1].clothingtype + "</p>");
        })
    }

    // Checks if user's closet is empty, adds empty closet notice to HTML
    function checkCloset() {
        let closetDiv = document.getElementById('closet_output');
        console.log(closetDiv.children.length);
        if (closetDiv.children.length < 2) {
            let notice = document.createElement('p');
            notice.textContent = "Your closet is empty."
            closetDiv.appendChild(notice);
        }
    }

    // AJAX function sends request to clothing controller to get all of the
    // user's clothing items, then adds each item to the HTML.
    function getCloset(userId) {
        console.log("Getting user's clothes...");

        $.post("/user-clothes", {userId:userId}, function(clothes) {
            console.log("back from server with:");
            console.log(clothes);
            //append to output div
            $("#closet_output").append("<p>" + clothes[0].clothingtype + "</p>");
        })
    }
</script>