<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clueless Closet | <%= title %></title>
<link rel="stylesheet" type="css" href="../../styles/main.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--Temporary-->
<!--TODO: Get links to static files working-->
<style>
    @import url('https://fonts.googleapis.com/css2?family=Nerko+One&family=Open+Sans+Condensed:wght@300&display=swap');
    body {
        background-color: #FFDAD6;
        font-family: 'Open Sans Condensed', sans-serif;
    }
    h1, h2, h3 {
        font-family: 'Nerko One', cursive;
    }
    header h1 {
        text-align: center;
        font-size: 4em;
    }
    #nav_div {
        display: grid;
        grid-template-columns: 1fr 100px;
        grid-gap: 100px;
    }
    nav ul {
        margin: 0;
        padding: 0;
    }
    nav li{
        list-style-type: none;
        margin: 5px;
    }
    a {
        display: block;
        text-decoration: none;
        padding: 5px 15px;
        color: black;
    }
    a:hover {
        text-decoration: underline;
        color: #FFA299;
    }
    main {
        text-align: center;
    }
    .success {
        background-color: #9AC482;
    }
    .warning {
        background-color: #EDD16E;
    }
</style>

<script>
    /*** clothing.js ***/

    // AJAX function sends request to clothing controller to generate an outfit
    // then adds the outfit to HTML.
    function generateOutfit(userId) {
        console.log("Generating new outfit...");

        $.post("/generate", {userId:userId}, function(outfit) {
            console.log("back from server with:");
            console.log(outfit);
            console.log(outfit.length);
            // append to output div
            $("#outfit_output").empty();
            
            // check if outfit is empty
            if (outfit != undefined || outfit != null || outfit.length > 0) {
                outfit.forEach(e => {
                    $("#outfit_output").append("<p>" + e.clothingcolor + " " + e.clothingtype + "</p>");
                });
            }
            else {
                $("#outfit_output").append("<p>Could not generate outfit. Add more items to your closet and try again.</p>");
            }
            
        })
    }

    // Checks if user's closet is empty, adds empty closet notice to HTML
    function checkCloset() {
        let closetDiv = document.getElementById('closet_output');
        console.log(closetDiv.children.length);
        if (closetDiv.children.length < 2) {
            let notice = document.createElement('p');
            notice.textContent = "Your closet is empty."
            closetDiv.appendChild(notice);
        }
    }

    // AJAX function sends request to clothing controller to get all of the
    // user's clothing items, then adds each item to the HTML.
    function getCloset(userId) {
        console.log("Getting user's clothes...");

        $.post("/user-clothes", {userId:userId}, function(clothes) {
            console.log("back from server with:");
            console.log(clothes);
            //append each clothing item to output div
            clothes.forEach(e => {
                $("#closet_output").append("<p>" + e.clothingtype + "</p>");
            });
        })
    }
</script>

<script>
    /*** message.js ***/

    setTimeout(function() {
        $('#message_fade').fadeOut();

    }, 10000);

    function messageFadeIn() {

    }

    function messageFadeOut() {
    
    }
</script>